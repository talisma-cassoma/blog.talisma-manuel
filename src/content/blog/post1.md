---
title: "Integrated finance control system"
description: "architecting a integrated system to save daily expenses anywhere offline or online"
pubDate: "March 09 2025"
heroImage: "/ourmoneyapp.webp"
badge: "fullstack"
tags: ["api","desktop", "web app", "data analysis"]
---

I'm excited to finally share a project I've been working on in my spare time: OurMoney, a personal finance tracking app designed for simplicity, efficiency, and offline functionality. Let me tell you about it!

### The Problem & My Solution:

Like many, I struggled to find a personal finance app that truly fit my needs. Spreadsheets felt cumbersome, and existing apps were often bloated with unnecessary features or lacked the flexibility I needed. I wanted a solution that was simple to use, accessible on both my computer and phone, and capable of working offline when an internet connection wasn't available. This led me to create OurMoney.

To meet these requirements, I architected OurMoney as a system of synchronized apps: a desktop application for offline and local use, and a web application for online access.

OurMoney comprises three main components that work together:

*   **A Desktop App:** a GUI app where i can save all expenses and income, wheither i'm online or offline.
*   **A Web App:** where i save all expenses and income when i'm online in any other divice.
*   **A Server API:** To connect the apps and synchronize data.

<h3 class="flex items-center gap-1"> Desktop App <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#00B37E"><path d="M400-200v-80H160q-33 0-56.5-23.5T80-360v-400q0-33 23.5-56.5T160-840h640q33 0 56.5 23.5T880-760v400q0 33-23.5 56.5T800-280H560v80h40q17 0 28.5 11.5T640-160q0 17-11.5 28.5T600-120H360q-17 0-28.5-11.5T320-160q0-17 11.5-28.5T360-200h40ZM160-360h640v-400H160v400Zm0 0v-400 400Z"/></svg></h3>

<p align="center">  
  <img src="/ourmoney.desktop_app.webp" alt="OurMoney desktop GUI">  
  <em>desktop GUI built with pyqt</em> 
</p> 

The Desktop App is a GUI built with **PyQt** and uses a local **SQLite database** for data storage. It allows the user to add, edit, delete, and view financial transactions, and generate PDF reports based on their data**. To facilitate **data analysis**, the app also supports **exporting transactions to JSON, CSV, and XLSX formats**, as well as **importing from JSON**.
 
**I've used pyinstaller to bundle the app and create-dmg to generate the .dmg file**  

I also added a **service** using **Quarto to build custom pdf reports** on click. The data is processed locally and the PDF is generated by the app.
you can see how it looks like in the image below. The PDF report includes a tables, echarts and provides insights into spending patterns.

<p align="center">  
  <img src="/ourmoney.pdf_report.webp" alt="OurMoney pdf report">  
  <em>PDF report generated by the destop app using quarto</em>
</p>


The Desktop App synchronizes data with the server using a status flag on each transaction record. The 'status' field indicates whether a transaction is 'unsynced' (not yet pushed to the server), 'synced' (successfully synchronized), 'deleted' (locally deleted), or 'updated' (locally modified).

In order **to ensure to fluidity in GUI**, I used some frontend strategies like **infinite scroll** and threads(the **pyQt threads**). For example **I added a thread in Desktop app that checks the Server API's availability by sending a ping-pong request periodically**. If the Server API is reachable, the app pulls new transactions from the server and saves them locally with a 'synced' status. It also pushes local transactions with 'unsynced,' 'deleted,' or 'updated' statuses to the server for synchronization. **Because importing big JSON to database and also post/get all this data to/from server by request can take too much time, and memory and processing i used streams and bacthes strategy**.

The desktop app architecture follows the **Model-View-Controller (MVC) pattern**. I separated the use cases as services, and use a **data transfer object (DTO) strategy** to communicate the services with controller and the GUI.

A snippet of the importing JSON service on MVC: 


```python
import ijson
from entities.transactions_entity import TransactionEntity
from repositories.transactions_repository import TransactionsRepository

def import_transactions_to_json():

    batch_size = 1000
    transactions: list[TransactionEntity] = []

    model = TransactionsRepository()

    with open('myTransactions_20250120.json', 'r') as file:
        parser = ijson.items(file, 'item')  # Parse the array of transactions

        for transaction in parser:
            transaction = TransactionEntity(
                id=transaction["id"],
                description=transaction["description"],
                type=transaction["type"],
                category=transaction["category"],
                price=float(transaction["price"]),
                owner=transaction["owner"],
                email=transaction["email"],
                created_at=transaction["createdAt"],
                status=transaction["status"],
            )
            transactions.append(transaction)
            if len(transactions) >= batch_size:
                model.insert_many(transactions)
                transactions = []

        # Insert any remaining transactions
        if transactions:
            model.insert_many(transactions) 
```
The all code of desktop app can be found [here](https://github.com/talisma-cassoma/ourmoney.desktop)  

<h3 class="flex items-center gap-1">Web App <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#00B37E"><path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q146 0 255.5 91.5T872-559h-82q-19-73-68.5-130.5T600-776v16q0 33-23.5 56.5T520-680h-80v80q0 17-11.5 28.5T400-560h-80v80h80v120h-40L168-552q-3 18-5.5 36t-2.5 36q0 131 92 225t228 95v80Zm364-20L716-228q-21 12-45 20t-51 8q-75 0-127.5-52.5T440-380q0-75 52.5-127.5T620-560q75 0 127.5 52.5T800-380q0 27-8 51t-20 45l128 128-56 56ZM620-280q42 0 71-29t29-71q0-42-29-71t-71-29q-42 0-71 29t-29 71q0 42 29 71t71 29Z"/></svg></h3>

<a href="https://talisma-cassoma.github.io/ourmoney.web/"><p align="center">  
  <img src="/ourmoney.web_app.webp" alt="OurMoney web app">  
  <em>OurMoney web app built with Reactjs</em> 
</p></a> 

The Web App provides online access to OurMoney, allowing me to manage my finances from any device with a web browser. Built with **ReactJS**, the application offers a responsive and intuitive user interface for adding, editing, deleting, and viewing transactions. Beacuse it shall be exposed in internet security is a top priority, i find interesting add some security layer with user **authentication using JWT (JSON Web Tokens)**. I automated the deployment process using **GitHub Actions** to ensure **continuous integration and delivery(CI/CD)** of updates. This streamlines the deployment, ensuring that updates are pushed efficiently. The Web App integrates with the Server API via RESTful API calls to persist and retrieve transaction data. take a look of the web page <a href="http://talisma-cassoma.github.io/ourmoney">here</a>, the code can be found [here](https://github.com/talisma-cassoma/ourmoney.web) it uses typescript.

<h3 class="lg:max-w-[900px] max-w-[100vw] flex items-center gap-1"> Server API <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#00B37E"><path d="M160-120q-33 0-56.5-23.5T80-200v-560q0-33 23.5-56.5T160-840h200q33 0 56.5 23.5T440-760v560q0 33-23.5 56.5T360-120H160Zm440 0q-33 0-56.5-23.5T520-200v-560q0-33 23.5-56.5T600-840h200q33 0 56.5 23.5T880-760v560q0 33-23.5 56.5T800-120H600Zm-440-80h200v-560H160v560Zm440 0h200v-560H600v560ZM320-400q0-17-11.5-28.5T280-440h-40q-17 0-28.5 11.5T200-400q0 17 11.5 28.5T240-360h40q17 0 28.5-11.5T320-400Zm440 0q0-17-11.5-28.5T720-440h-40q-17 0-28.5 11.5T640-400q0 17 11.5 28.5T680-360h40q17 0 28.5-11.5T760-400ZM320-520q0-17-11.5-28.5T280-560h-40q-17 0-28.5 11.5T200-520q0 17 11.5 28.5T240-480h40q17 0 28.5-11.5T320-520Zm440 0q0-17-11.5-28.5T720-560h-40q-17 0-28.5 11.5T640-520q0 17 11.5 28.5T680-480h40q17 0 28.5-11.5T760-520ZM320-640q0-17-11.5-28.5T280-680h-40q-17 0-28.5 11.5T200-640q0 17 11.5 28.5T240-600h40q17 0 28.5-11.5T320-640Zm440 0q0-17-11.5-28.5T720-680h-40q-17 0-28.5 11.5T640-640q0 17 11.5 28.5T680-600h40q17 0 28.5-11.5T760-640ZM160-200h200-200Zm440 0h200-200Z"/></svg></h3>

The Server API acts as the central hub for OurMoney, managing data persistence and synchronization between the Desktop and Web Apps. **Built with Node.js and Express**, the API provides a RESTful interface for accessing and manipulating transaction data. I chose Node.js and Express for their performance and scalability and above all my experience using it. Data is stored in a **PostgreSQL database accessed through Prisma**, an ORM that simplifies database interactions and provides type safety. The database schema mirrors the SQLite database used by the Desktop App, ensuring seamless data synchronization. To simplify deployment and ensure consistent environments, the API is containerized using **Docker** and deployed on Render. Docker Compose is used to manage dependencies locally. i choose Render for its ease of use, cost-effectiveness and robust deployment capabilities.

<h3 class="flex items-center gap-1"> Final Thoughts: <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#00B37E"><path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q48 0 93.5 11t87.5 32q15 8 19.5 24t-5.5 30q-10 14-26.5 18t-32.5-4q-32-15-66.5-23t-69.5-8q-134 0-227 93t-93 227q0 134 93 227t227 93q26 0 51-4t50-12q17-5 33-.5t25 19.5q8 14 3.5 30T622-105q-34 13-70 19t-72 6Zm280-200h-80q-17 0-28.5-11.5T640-320q0-17 11.5-28.5T680-360h80v-80q0-17 11.5-28.5T800-480q17 0 28.5 11.5T840-440v80h80q17 0 28.5 11.5T960-320q0 17-11.5 28.5T920-280h-80v80q0 17-11.5 28.5T800-160q-17 0-28.5-11.5T760-200v-80ZM424-408l372-373q11-11 28-11t28 11q11 11 11 28t-11 28L452-324q-12 12-28 12t-28-12L282-438q-11-11-11-28t11-28q11-11 28-11t28 11l86 86Z"/></svg></h3>

Building OurMoney was a challenging but rewarding experience. I gained valuable experience with **fullstack** development, particularly in areas like software architecture, design paterns, data synchronization and security.On the flip side, working on **data analysis** pushed me to revisit and refresh a bunch of **statistics concepts**, but was fun. I am proud of achieving a fully functional, cross-platform personal finance application that meets my specific needs. In the future, I plan to add support for automated transaction importing and more advanced reporting features. I welcome any feedback on the project! give me a ✨ if you like it in my [github repo.](https://github.com/talisma-cassoma/ourmoney.desktop)