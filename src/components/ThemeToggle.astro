---
import { Icon } from "astro-icon/components";
---

<button
  type="button"
  class="inline-flex items-center gap-x-2 rounded-full px-3 py-2 text-sm text-black dark:text-white hover:bg-black/10 dark:hover:bg-white/10"
  onclick="toggleTheme()"
  aria-label="Toggle Theme"
>
  <Icon name="tabler:sun-filled" class="w-5 h-5 block dark:hidden" />
  <Icon name="tabler:moon-filled" class="w-5 h-5 hidden dark:block" />
</button>

<script>
 window.toggleTheme = function (){
    const html = document.documentElement;
    const currentTheme = html.getAttribute("data-theme") || "light";

    // Alterna entre light e dark
    const newTheme = currentTheme === "light" ? "dark" : "light";
    html.setAttribute("data-theme", newTheme);

    // Salva a preferência no localStorage
    localStorage.setItem("theme", newTheme);
  }

  // Aplica o tema salvo no carregamento da página
  document.addEventListener("DOMContentLoaded", () => {
    const savedTheme = localStorage.getItem("theme") || "light";
    document.documentElement.setAttribute("data-theme", savedTheme);
  });
</script>
